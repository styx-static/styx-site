<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="description" content="Styx static site generator documentation">
<title>Styx manual</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Styx manual</h1>
<div class="details">
<span id="revnumber">version 0.2.0-dev</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_why_use_styx">1.1. Why use Styx</a></li>
</ul>
</li>
<li><a href="#_installation">2. Installation</a></li>
<li><a href="#_quick_start">3. Quick Start</a></li>
<li><a href="#_command_line_interface">4. Command line interface</a>
<ul class="sectlevel2">
<li><a href="#_generic_commands">4.1. Generic commands</a></li>
<li><a href="#_build">4.2. Build</a></li>
<li><a href="#_serve">4.3. Serve</a></li>
<li><a href="#_deploy">4.4. Deploy</a></li>
</ul>
</li>
<li><a href="#_basics">5. Basics</a>
<ul class="sectlevel2">
<li><a href="#_configuration">5.1. Configuration</a></li>
<li><a href="#_directory_structure">5.2. Directory Structure</a></li>
<li><a href="#defaultnix">5.3. default.nix</a>
<ul class="sectlevel3">
<li><a href="#_skeleton">5.3.1. Skeleton</a></li>
<li><a href="#_main_logic">5.3.2. Main Logic</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_content">6. Content</a>
<ul class="sectlevel2">
<li><a href="#_pages">6.1. Pages</a></li>
<li><a href="#_posts">6.2. Posts</a></li>
<li><a href="#_drafts">6.3. Drafts</a></li>
<li><a href="#_custom_content">6.4. Custom content</a></li>
<li><a href="#_static_files">6.5. Static files</a></li>
</ul>
</li>
<li><a href="#_customization">7. Customization</a>
<ul class="sectlevel2">
<li><a href="#_templates">7.1. Templates</a>
<ul class="sectlevel3">
<li><a href="#_text_handling_basics">7.1.1. Text handling basics</a></li>
<li><a href="#_layout_templates">7.1.2. Layout templates</a></li>
<li><a href="#_partial_templates">7.1.3. Partial templates</a></li>
<li><a href="#_template_environment">7.1.4. Template environment</a></li>
</ul>
</li>
<li><a href="#_calling_templates_in_templates">7.2. Calling templates in templates</a></li>
<li><a href="#_applying_templates_to_multiple_contents">7.3. Applying templates to multiple contents</a></li>
</ul>
</li>
<li><a href="#_library">8. Library</a>
<ul class="sectlevel2">
<li><a href="#_generation">8.1. generation</a></li>
<li><a href="#_nixpkgs">8.2. nixpkgs</a></li>
<li><a href="#_content_2">8.3. content</a></li>
<li><a href="#_template">8.4. template</a></li>
<li><a href="#_utils">8.5. utils</a></li>
</ul>
</li>
<li><a href="#_cookbook">9. Cookbook</a>
<ul class="sectlevel2">
<li><a href="#_navbar">9.1. NavBar</a></li>
<li><a href="#_pagination">9.2. Pagination</a></li>
<li><a href="#_breadcrumbs">9.3. Breadcrumbs</a></li>
</ul>
</li>
<li><a href="#_deployment">10. Deployment</a>
<ul class="sectlevel2">
<li><a href="#_github_pages">10.1. GitHub pages</a></li>
<li><a href="#_other">10.2. Other</a></li>
</ul>
</li>
<li><a href="#_release_notes">11. Release Notes</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Styx is a functional static site generator written in Nix expression language.</p>
</div>
<div class="paragraph">
<p>Styx is aimed to be flexible and easy to customize, also Styx is using the Nix package manager so it has a very effective caching system.
External applications can be used in Styx in a very easy way without having to install them.</p>
</div>
<div class="sect2">
<h3 id="_why_use_styx"><a class="anchor" href="#_why_use_styx"></a>1.1. Why use Styx</h3>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Uniformity: The same language is used in templates and logic.</p>
</li>
<li>
<p>Caching: Styx benefit of the Nix caching system, so only needed pages are rebuild.</p>
</li>
<li>
<p>Light weight: Styx has very few dependencies.</p>
</li>
<li>
<p>Flexible: Styx is very flexible and make it is easy to implement new features.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Performance: Some parts of Styx like the posts conversion can be <strong>very</strong> slow, this is partly counter-balanced by the caching system, but on a fresh site generation Styx can be magnitudes slower than other static site generators.</p>
</li>
<li>
<p>Semantics: Styx is using the Nix expression language for its logic and templates. The Nix expression language is quite different of usual languages and can need some time to get familiar with.</p>
</li>
<li>
<p>Nix: Styx has only one dependency, the Nix package manager. To use Styx you must install Nix, and depending your platform, that can be challenging. But installing Nix might totally change your views on package management!</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation"><a class="anchor" href="#_installation"></a>2. Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The only requirement to install Styx is the <a href="http://nixos.org/nix/">Nix package manager</a>.
Refer to the <a href="http://nixos.org/nix/manual/#chap-installation">Nix installation instructions</a> to install Nix.</p>
</div>
<div class="paragraph">
<p>It is possible to install Nix with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ nix-env -i https://github.com/ericsagnes/styx/archive/latest.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>To only test Styx, it is recommended to use the <code>nix-shell</code> command to start a temporary environment including Styx:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ nix-shell -p `nix-build https://github.com/ericsagnes/styx/archive/latest.tar.gz`</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start"><a class="anchor" href="#_quick_start"></a>3. Quick Start</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Styx site can be created and locally served with the following set of commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ nix-shell -p $(nix-build https://github.com/styx-static/styx/archive/latest.tar.gz) <i class="conum" data-value="1"></i><b>(1)</b>
[nix-shell]$ styx new myblog <i class="conum" data-value="2"></i><b>(2)</b>
[nix-shell]$ cd myblog <i class="conum" data-value="3"></i><b>(3)</b>
[nix-shell:~/myblog]$ styx serve <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enter a nix-shell with Styx.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Generate a new site in the <code>myblog</code> directory.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Enter the Styx site root folder.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Serve the site on a local server.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_command_line_interface"><a class="anchor" href="#_command_line_interface"></a>4. Command line interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Styx provides a command line program <code>styx</code>.</p>
</div>
<div class="sect2">
<h3 id="_generic_commands"><a class="anchor" href="#_generic_commands"></a>4.1. Generic commands</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx --help</code></dt>
<dd>
<p>Display the help message.</p>
</dd>
<dt class="hdlist1"><code>styx --version</code></dt>
<dd>
<p>Display the version.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_build"><a class="anchor" href="#_build"></a>4.2. Build</h3>
<div class="paragraph">
<p>The <code>build</code> command is used to build a Styx site. It must be used in a Styx site root file.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx build</code></dt>
<dd>
<p>Build the Styx site and write the output in the <code>public</code> folder.</p>
</dd>
<dt class="hdlist1"><code>styx build -o FOLDER</code></dt>
<dd>
<p>Build the nix site and write the output in the <code>FOLDER</code> folder.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>nix-build</code> <code>--show-trace</code>, <code>--arg NAME VALUE</code> and <code>--argstr NAME VALUE</code> flags can be used with the <code>build</code> command.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_serve"><a class="anchor" href="#_serve"></a>4.3. Serve</h3>
<div class="paragraph">
<p>The <code>serve</code> command is used to build a site and launch a local server. This allow to check the site without having to deploying it.
The server can be stopped by pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx serve</code></dt>
<dd>
<p>Will serve on the localhost on port <code>8080</code>.</p>
</dd>
<dt class="hdlist1"><code>styx-serve --port 9090</code></dt>
<dd>
<p>Will serve on the port <code>9090</code>.</p>
</dd>
<dt class="hdlist1"><code>styx-serve --preview</code></dt>
<dd>
<p>Enable preview mode. In preview mode drafts are displayed.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>nix-build</code> <code>--show-trace</code>, <code>--arg NAME VALUE</code> and <code>--argstr NAME VALUE</code> flags can be used with the <code>serve</code> command.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_deploy"><a class="anchor" href="#_deploy"></a>4.4. Deploy</h3>
<div class="paragraph">
<p>The`deploy` command is used to deploy A styx site on a remote server.
Currently only GitHub pages are supported.</p>
</div>
<div class="paragraph">
<p>For more details see the <a href="#_deployment">Deployment</a> section.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx deploy --init&#8212;&#8203;gh-pages</code></dt>
<dd>
<p>Prepare a git repository to be able to deploy on GitHub pages.</p>
</dd>
<dt class="hdlist1"><code>styx deploy --gh-pages</code></dt>
<dd>
<p>Commit the Styx site to the <code>gh-pages</code> branch.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basics"><a class="anchor" href="#_basics"></a>5. Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Styx is using the Nix expression language.
The Nix expression language is a lazy evaluated functional language with unconventional semantics. It is recommended to read the <a href="http://nixos.org/nix/manual/#ch-expression-language">Nix expression language chapter</a> of the Nix manual to get more familiar with it.</p>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="#_configuration"></a>5.1. Configuration</h3>
<div class="paragraph">
<p>Styx is configured with the <code>conf.nix</code> file present in the site root directory.</p>
</div>
<div class="listingblock">
<div class="title">conf.nix</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">include::../sample/conf.nix[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration is an attribute set, and new configuration attributes can be added at will.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>pagesDir</code></dt>
<dd>
<p>Directory where pages are located.</p>
</dd>
<dt class="hdlist1"><code>postsDir</code></dt>
<dd>
<p>Directory where posts are located.</p>
</dd>
<dt class="hdlist1"><code>draftsDir</code></dt>
<dd>
<p>Directory where drafts are located.</p>
</dd>
<dt class="hdlist1"><code>templatesDir</code></dt>
<dd>
<p>Directory where templates are located.</p>
</dd>
<dt class="hdlist1"><code>staticDir</code></dt>
<dd>
<p>Directory where static files are located.</p>
</dd>
<dt class="hdlist1"><code>siteId</code></dt>
<dd>
<p>Site id, used in the caching scheme. Should composed of lowercase letters, numbers, <code>-</code> and <code>_</code>. Spaces are not allowed.</p>
</dd>
<dt class="hdlist1"><code>siteURL</code></dt>
<dd>
<p>URL of the site, must be set to the URL of the domain the site will be deployed. Must not contain a trailing <code>/</code>.</p>
</dd>
<dt class="hdlist1"><code>siteTitle</code></dt>
<dd>
<p>Site title, used in the site header and the atom feed.</p>
</dd>
<dt class="hdlist1"><code>siteDescription</code></dt>
<dd>
<p>Site description used in the base template.</p>
</dd>
<dt class="hdlist1"><code>postsOnIndexPage</code></dt>
<dd>
<p>Maximum number of posts on the index page.</p>
</dd>
<dt class="hdlist1"><code>postsPerArchivePage</code></dt>
<dd>
<p>Maximum number of posts per archive page.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_directory_structure"><a class="anchor" href="#_directory_structure"></a>5.2. Directory Structure</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>├── conf.nix <i class="conum" data-value="1"></i><b>(1)</b>
├── default.nix <i class="conum" data-value="2"></i><b>(2)</b>
├── drafts/ <i class="conum" data-value="3"></i><b>(3)</b>
├── lib/ <i class="conum" data-value="4"></i><b>(4)</b>
├── pages/ <i class="conum" data-value="5"></i><b>(5)</b>
├── posts/ <i class="conum" data-value="6"></i><b>(6)</b>
├── static/ <i class="conum" data-value="7"></i><b>(7)</b>
└── templates/ <i class="conum" data-value="8"></i><b>(8)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>conf.nix</code> is the main configuration, see <a href="#_configuration">Configuration</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>default.nix</code> is the main file for site generation, see <a href="#defaultnix">default.nix</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>drafts/</code> is the default directory containing drafts, see <a href="#_drafts">Drafts</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>lib/</code> is the directory holding Styx library functions, see <a href="#_library">Library</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>pages/</code> is the default directory containing pages, see <a href="#_pages">Pages</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>posts/</code> is the default directory containing drafts, see <a href="#_drafts">Drafts</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><code>static/</code> is the default directory containing static files, see <a href="#_static_files">Static files</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><code>templates/</code> is the default directory containing templates files, see <a href="#_templates">Templates</a> for details.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="defaultnix"><a class="anchor" href="#defaultnix"></a>5.3. default.nix</h3>
<div class="paragraph">
<p><code>default.nix</code> is the central file of a Styx site and is responsible for generating the website.</p>
</div>
<div class="paragraph">
<p><code>default.nix</code> consists in a single function that generate a site when evaluated.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Functions in the Nix expression language are declared in a <code>head: body</code> syntax, for example <code>a: b: a + b</code> is a function adding two numbers.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sample site <code>default.nix</code> show many of the Styx possibilities, so might feel a little complicated for a new user.</p>
</div>
<div class="paragraph">
<p>A standard site <code>default.nix</code> can be lot simpler than the sample one.</p>
</div>
<div class="paragraph">
<p>The following sections will explain <code>default.nix</code> parts by parts.</p>
</div>
<div class="sect3">
<h4 id="_skeleton"><a class="anchor" href="#_skeleton"></a>5.3.1. Skeleton</h4>
<div class="paragraph">
<p>The skeleton is the boiler-plate code of Styx, it should be edited at own risks as any change in it might lead to unexpected results.</p>
</div>
<div class="listingblock">
<div class="title"><code>default.nix</code> skeleton</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ pkgs ? import &lt;nixpkgs&gt; {} <i class="conum" data-value="1"></i><b>(1)</b>
, previewMode ? false <i class="conum" data-value="2"></i><b>(2)</b>
, siteUrl ? null
, lastChange ? null
}@args: <i class="conum" data-value="3"></i><b>(3)</b>

let lib = import ./lib pkgs; <i class="conum" data-value="4"></i><b>(4)</b>
in with lib; <i class="conum" data-value="5"></i><b>(5)</b>

let <i class="conum" data-value="6"></i><b>(6)</b>

# Main Logic <i class="conum" data-value="7"></i><b>(7)</b>

in generateSite { inherit conf; pages = pageList; } <i class="conum" data-value="8"></i><b>(8)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is a function head declared as a deconstructed set, <code>?</code> righthand set the default value for the lefhand argument. This line is importing the default system nixpkgs.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>previewMode ? false</code> means that <code>previewMode</code> default value is <code>false</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>{ &#8230;&#8203; }@args</code> pattern provide a way to refer to the full parameter attribute set via <code>args</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>let</code> is a construction to declare local variables, a <code>let</code> block finish by a <code>in</code>. Any variable defined in a let is available in the let scope and in the scope right after the <code>in</code>.
<code>let a = 1; 1 + a</code> will result in <code>2</code>.
<code>let</code> are used to structure code in an easier to understand manner. This line import the <code>lib/default.nix</code> file and set it to a <code>lib</code> variable.
The <code>lib</code> variable is an attribute set containing Styx library functions.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <code>in</code> section of the previous <code>let</code>. The <code>with</code> coming next is a way to put all the top-level attributes of an attribute set in the scope. <code>with { a = 1; b = 2; }; a + b</code> result in <code>3</code>.
So in the previous line <code>lib</code> is imported in the <code>lib</code> local variable, and in this line all the top-level <code>lib</code> functions are inserted in the local scope.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Another <code>let</code> to start a scope inheriting <code>lib</code> and all its attributes (top-level functions).</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Contains the main logic, and will be explained in the next section.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>This is what the whole <code>default.nix</code> function return. <code>generateSite</code> is a function that generate the site. All the logic in the "Main Logic" part is meant to prepare <code>generateSite</code> arguments.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The default parameters in <code>default.nix</code> head: <code>pkgs</code>, <code>previewMode</code>, <code>siteUrl</code> and <code>lastChange</code> are set and expected by Styx. Removing or changing them will break the site generation process.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_main_logic"><a class="anchor" href="#_main_logic"></a>5.3.2. Main Logic</h4>
<div class="paragraph">
<p>Main logic part can be divided in three parts: setup, template declaration and pages declaration.
The order of declarations in the main logic part is not important and can be changed to fit preference.</p>
</div>
<div class="sect4">
<h5 id="_setup"><a class="anchor" href="#_setup"></a>Setup</h5>
<div class="paragraph">
<p>This part contains some boiler-plate code. Variables can be declared at will to fit any special needs.
(Comments removed in favor of call-out explanations)</p>
</div>
<div class="listingblock">
<div class="title">Setup section in default.nix</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  conf = overrideConf (import ./conf.nix) args; <i class="conum" data-value="1"></i><b>(1)</b>

  state = { inherit lastChange; }; <i class="conum" data-value="2"></i><b>(2)</b>

  genericEnv = { inherit conf state lib templates; }; <i class="conum" data-value="3"></i><b>(3)</b>

  loadTemplate = loadTemplateWithEnv genericEnv; <i class="conum" data-value="4"></i><b>(4)</b>

  navbar = [ (head pages.archives) pages.about ]; <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Loading the main configuration file, <code>conf.nix</code> in a <code>conf</code> local variable.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Setting a <code>state</code> local variable containing "impure" values. It contains only the <code>lastChange</code> variable coming from <code>default.nix</code> main function head. (Skeleton point 1)
<code>lastChange</code> value is automatically set by the Styx command.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This initialize a generic template environment. Most of templates expect to have access to <code>conf</code>, <code>state</code>, <code>lib</code> and <code>templates</code>. It is not recommended to remove any of these.
On the other hand it is fine to add new attributes to the default environment to fit special needs.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Defining a helper function <code>loadTemplate</code> that loads a template with the default environment. This function is defined taking advantage of η-reduction so its argument is not specified.
<code>loadTemplate</code> is actively used during template declaration.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This define a <code>navbar</code> local variable containing pages to include in the NavBar. For more details about Navbar setting, see the <a href="#_navbar">NavBar</a> section.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
η-reduction is the process to drop a function abstraction. For example, <code>x: a x</code> is equivalent, and can be reduced to <code>a</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_templates_declaration"><a class="anchor" href="#_templates_declaration"></a>Templates declaration</h5>
<div class="paragraph">
<p>The template declaration part consists in declaring all the templates that will used. Templates are grouped in a single attribute set.</p>
</div>
<div class="paragraph">
<p>Template environment used to load templates can be extended on a per template basis to fit special needs.</p>
</div>
<div class="paragraph">
<p>The sample site contains many similar templates declarations, so this section will only present interesting examples.</p>
</div>
<div class="listingblock">
<div class="title">Templates declaration</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  templates = { <i class="conum" data-value="1"></i><b>(1)</b>
    index   = loadTemplate "index.nix"; <i class="conum" data-value="2"></i><b>(2)</b>
    layout  = loadTemplateWithEnv  <i class="conum" data-value="3"></i><b>(3)</b>
                (genericEnv // { inherit navbar; feed = pages.feed; }) <i class="conum" data-value="4"></i><b>(4)</b>
                "layout.nix"; <i class="conum" data-value="5"></i><b>(5)</b>
    navbar = { <i class="conum" data-value="6"></i><b>(6)</b>
      main = loadTemplate "navbar.main.nix";
      brand = loadTemplate "navbar.brand.nix";
    };
  };</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaring a <code>templates</code> attribute set where all the templates will be declared.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declaring an <code>index</code> variable that holds the <code>index.nix</code> template loaded with the generic template environment.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Declaring a <code>layout</code> template that holds the layout template, this use the <code>loadTemplateWithEnv</code> function so a custom environment can be passed as the first argument.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The environment passed to the template is the generic environment extended with a variable <code>feed</code> that holds the feed page (<code>pages.feed</code>) and the <code>navbar</code> variable that holds the list of pages to show in the NavBar.
The base template is managing the main layout of the site and the <code>head</code> section of the HTML document.
As we want to have a link to the feed in it, we add the feed page to a variable so it can be used in the template. Similar for the NavBar.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The template file to load, <code>layout.nix</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Declaring templates in a sub attribute set. Templates in a subset can be accessed with <code>.</code>, for example the navbar main template is accessed by <code>templates.navbar.main</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>//</code> is the operator to merge attribute sets. If the two sets have a same key, the right hand set value will be set. The merge is not recursive.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_pages_declaration"><a class="anchor" href="#_pages_declaration"></a>Pages declaration</h5>
<div class="paragraph">
<p>The pages declaration consists in declaring all the pages of the site in an attribute set.
The sample site contains many similar pages declarations, so this section will only present interesting examples.</p>
</div>
<div class="paragraph">
<p>A page is an attribute set with a few constraints, to learn more about how it should be structured see the <a href="#_pages">Pages</a> section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A page attribute set must consist at least of <code>template</code>, <code>href</code> and <code>title</code> attributes.
The feed page is an exception as it use the site title from <code>conf</code> and then does not need a <code>title</code> attribute.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Pages declaration 1/2</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  pages = rec { <i class="conum" data-value="1"></i><b>(1)</b>
    index = { <i class="conum" data-value="2"></i><b>(2)</b>
      title = "Home";
      href = "index.html";
      template = templates.index;
      inherit feed; <i class="conum" data-value="3"></i><b>(3)</b>
      posts = take conf.postsOnIndexPage posts; <i class="conum" data-value="4"></i><b>(4)</b>
      archivePage = head archives; <i class="conum" data-value="5"></i><b>(5)</b>
    };

    about = {
      href = "about.html";
      template = templates.about;
      breadcrumbs = [ index ]; <i class="conum" data-value="6"></i><b>(6)</b>
    } // (parsePage conf.pagesDir "about.md"); <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaring the <code>pages</code> attribute set. It is important that this set holds only valid pages or list of pages.
The <code>rec</code> keyword make the set recursive, so it is possible to refer set attributes in other attributes.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declaring an index page containing the basic <code>title</code>, <code>href</code> and <code>template</code> attributes.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Inheriting the feed page, this is equal to <code>feed = feed;</code>. <code>feed</code> is a non-standard page attribute and is declared to fit contents needs.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This also set a non-standard attribute, <code>posts</code> set to the first <code>conf.postsOnIndexPage</code> items of the post page list.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Another non-standard attribute, <code>archivePage</code> set to the first page of the archives page list.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Setting page breadcrumbs, for details on the breadcrumbs system see the <a href="#_breadcrumbs">Breadcrumbs</a> section.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Fetching page content and title from a markdown.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Pages declaration 2/2</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">    archives = splitPage { <i class="conum" data-value="1"></i><b>(1)</b>
      baseHref = "archives/posts";
      template = templates.archive;
      items = posts;
      itemsPerPage = conf.postsPerArchivePage;
      title = "Posts";
      breadcrumbs = [ index ];
    };

    feed = { <i class="conum" data-value="2"></i><b>(2)</b>
      posts = take 10 posts;
      href = "feed.xml";
      template = templates.feed;
      layout = id;
    };

    posts = let  <i class="conum" data-value="3"></i><b>(3)</b>
      posts = getPosts conf.postsDir "posts"; <i class="conum" data-value="4"></i><b>(4)</b>
      drafts = optionals previewMode (getDrafts conf.draftsDir "drafts"); <i class="conum" data-value="5"></i><b>(5)</b>
      preparePosts = p: p // { template = templates.post.full; breadcrumbs = with pages; [ index (head archives) ]; }; <i class="conum" data-value="6"></i><b>(6)</b>
    in sortPosts (map preparePosts (posts ++ drafts)); <i class="conum" data-value="7"></i><b>(7)</b>
  };

  pageList =
    let list = (pagesToList pages); <i class="conum" data-value="8"></i><b>(8)</b>
    in map (setDefaultLayout templates.layout) list; <i class="conum" data-value="9"></i><b>(9)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaring an archives list of pages by splitting items trough multiple pages. See <a href="#splitPage">[splitPage]</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A simple page declaration. As the feed template is using <code>conf.siteTitle</code> in place of <code>title</code>, it is not required to set a title in this special case.
Also, as the feed page does not need a layout, the layout function is set to <code>id</code>, see <a href="#_layout_templates">Layout templates</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Declare the list of posts, this is the most complex page declaration presented in this section.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Fetching the posts and setting their output path to <code>posts</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Fetching the drafts only if <code>previewMode</code> is enabled. (by using the <code>--preview</code> flag to the Nix command)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Declaring a <code>preparePost</code> function that take a post and extends it by setting a template and breadcrumbs.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Finally merging the posts and drafts in a list, setting the template and breadcrumbs to each, and sorting the list so the posts are in chronological order.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><code>generateSite</code> needs a list of pages, so we convert the <code>pages</code> attribute set to a <code>pageList</code> list with the <code>pagesToList</code> function.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Then, <code>setDefaultLayout</code> is used to set a layout template to all the pages that don&#8217;t set the <code>layout</code> attribute.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_content"><a class="anchor" href="#_content"></a>6. Content</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pages"><a class="anchor" href="#_pages"></a>6.1. Pages</h3>
<div class="paragraph">
<p>Pages is the most basic content unit. Every content in Styx is a page (posts and drafts are a special types of pages).</p>
</div>
<div class="paragraph">
<p>A page in Styx is an attribute set following a set of rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It must define at least the <code>href</code>, <code>title</code>, <code>layout</code> and the <code>template</code> keys.</p>
</li>
<li>
<p>The <code>template</code> key is a function that take the <code>page</code> attribute set as a parameter and return the page attribute set augmented with a <code>content</code> key representing the result of the template.</p>
</li>
<li>
<p>The <code>layout</code> key is a function take a page attribute set with a <code>content</code> key, returned by the the <code>template</code> key, and render the final page source.</p>
</li>
<li>
<p>The <code>href</code> key is the path of the generated page relative to site root.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is possible to extend a page attribute set at will for more complex use cases.</p>
</div>
<div class="listingblock">
<div class="title">Page definition example</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  pages.about = {
    href = "about.html";
    template = templates.about;
    title = "About";
    layout = templates.layout;
  };</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The layout being common to most of the pages, the default layout is usually set with a map function when the page attribute set is converted to a list of pages.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Extending a page attribute set</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  pages.about // { breadcrumbs = [ pages.index ]; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Page content can be directly set in the template, or imported from an external file with the <code>parsePage</code> function:</p>
</div>
<div class="listingblock">
<div class="title">Loading a markdown file</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  about = {
    href = "about.html";
    template = templates.about;
    breadcrumbs = [ index ];
  } // (parsePage conf.pagesDir "about.md");</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>parsePage</code> return a set with <code>title</code> and <code>content</code>. <code>content</code> is the converted HTML source of the page.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_posts"><a class="anchor" href="#_posts"></a>6.2. Posts</h3>
<div class="paragraph">
<p>Posts are a special type of pages. By default, Styx read files in markdown format from <code>conf.postsDir</code>, but it is possible to specify a custom directory to the <code>getPosts</code> function.</p>
</div>
<div class="paragraph">
<p>Post files should follow the <code>YYYY-MM-DD-TITLE.md</code> convention to be loaded. During build, Styx with display a message if it cannot load a post file.</p>
</div>
<div class="paragraph">
<p>Post attribute sets generated by the <code>parsePost</code> function have the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>timestamp</code>: Timestamp of the post in the <code>YYYY-MM-DD-TITLE</code> format.</p>
</li>
<li>
<p><code>href</code>: Relative URL to the post.</p>
</li>
<li>
<p><code>title</code>: Post title</p>
</li>
<li>
<p><code>id</code>: Name part of the post file name.</p>
</li>
<li>
<p><code>content</code>: Post content in HTML format.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>getPosts</code> function does not set a <code>template</code> and a <code>layout</code> key, so posts generated by it are imcomplete pages. These keys can be set afterwards.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_drafts"><a class="anchor" href="#_drafts"></a>6.3. Drafts</h3>
<div class="paragraph">
<p>Drafts are a special type of posts that are only generated when the <code>--preview</code> flag is passed to the Styx command.
By default, Styx read files in markdown format from <code>conf.draftsDir</code>, but it is possible to specify a custom directory to the <code>getDrafts</code> function.</p>
</div>
<div class="paragraph">
<p>Drafts attribute sets generated by the <code>parseDraft</code> function have the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>timestamp</code>: Timestamp of the post in the <code>YYYY-MM-DD-TITLE</code> format.</p>
</li>
<li>
<p><code>href</code>: Relative URL to the post.</p>
</li>
<li>
<p><code>title</code>: Post title</p>
</li>
<li>
<p><code>id</code>: Name part of the post file name.</p>
</li>
<li>
<p><code>content</code>: Post content in HTML format.</p>
</li>
<li>
<p><code>isDraft</code>: set to <code>true</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The only difference between posts and drafts is the presence of the <code>isDraft</code> attribute.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_custom_content"><a class="anchor" href="#_custom_content"></a>6.4. Custom content</h3>
<div class="paragraph">
<p>There is no limitation in the type of content Styx can generate.
The page attribute and the template environment can be extended to include any key that could fit special needs.</p>
</div>
<div class="paragraph">
<p>It is also possible to use any program provided in the nixpkgs packages in library functions.</p>
</div>
<div class="listingblock">
<div class="title">Using an external program</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  title = readFile (pkgs.runCommand "${timestamp}-${id}.title" {} ''
    ${pkgs.xidel}/bin/xidel ${html} -e "//h1[1]/node()" -q &gt; $out <i class="conum" data-value="1"></i><b>(1)</b>
    echo -n `tr -d '\n' &lt; $out` &gt; $out
  '');</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using the <a href="http://www.videlibri.de/xidel.html">Xidel</a> program to fetch the first title text of the post.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_static_files"><a class="anchor" href="#_static_files"></a>6.5. Static files</h3>
<div class="paragraph">
<p>Static files are the files that are added to the generated site folder.
Static files should be in the <code>conf.staticDir</code> directory.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customization"><a class="anchor" href="#_customization"></a>7. Customization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section explains how to customize a Styx site.</p>
</div>
<div class="sect2">
<h3 id="_templates"><a class="anchor" href="#_templates"></a>7.1. Templates</h3>
<div class="paragraph">
<p>Styx templates are functions that return text or page attribute sets when fully evaluated.</p>
</div>
<div class="paragraph">
<p>Templates are divided in two types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Layout templates, responsible for the final rendering of a page, it must return text. (page attribute set <code>layout</code> key)</p>
</li>
<li>
<p>Partial templates responsible for the partial rendering of a page, it should return a page attibute set, but in some special cases can return text. (page attribute set <code>template</code> key)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The template evaluation flow is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The partial template evaluate the page attribute set, this generate a partial result that is stored in the page attribute set <code>content</code> key.</p>
</li>
<li>
<p>The layout template evaluate the page attribute set returned by the partial template and produce the final source of the page.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_text_handling_basics"><a class="anchor" href="#_text_handling_basics"></a>7.1.1. Text handling basics</h4>
<div class="paragraph">
<p>Most of the work in template is done by manipulating text.</p>
</div>
<div class="paragraph">
<p>This introduce the basics of text handling in the templates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>multi-line text, delimited by <code>''</code>.</p>
<div class="listingblock">
<div class="title">Multi-line text</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">''
  Hello world!
  Hello Styx!
''</code></pre>
</div>
</div>
</li>
<li>
<p>single line text, delimited by <code>"</code>.</p>
<div class="listingblock">
<div class="title">Multi-line text</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">"Hello world!"</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nix expressions can be included in text in enclosed in <code>${&#8230;&#8203;}</code>.</p>
</div>
<div class="listingblock">
<div class="title">Expression antiquotation</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">let name = "world"; in
"Hello ${name}!"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_layout_templates"><a class="anchor" href="#_layout_templates"></a>7.1.2. Layout templates</h4>
<div class="paragraph">
<p>The layout template is responsible for rendering the final source of the page.
The layout template function usually takes a template environment, and a page attribute set with a <code>content</code>. (There are exceptions)</p>
</div>
<div class="paragraph">
<p>In a HTML context, the layout template is usually responsible of the HTML code that is not directly related to the content, like the <code>head</code> tag.</p>
</div>
<div class="listingblock">
<div class="title">Simple layout template.</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">env:
page:
''
  &lt;html&gt;
    ...
  &lt;body&gt;
    ...
    ${page.content}
    ...
  &lt;/body&gt;
  &lt;/html&gt;
''</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Layout templates are just functions, in case the partial template return the full page source like in the rss feed case, it is possible to set the page <code>layout</code> to the <code>id</code> function. This will make the layout evaluation transparent and return the <code>template</code> result.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_partial_templates"><a class="anchor" href="#_partial_templates"></a>7.1.3. Partial templates</h4>
<div class="paragraph">
<p>Partial templates are similar to the layout templates, with the only difference that their result will be evaluated by the layout template.
The partial template should set or update the <code>content</code> attribute of the page attribute set so the layout template can render the final source.
Partial templates can also add other attributes to the page attribute to fit any special need.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{ templates, ... }:
page:
let
  content =
    ''
      &lt;h1&gt;${page.title}&lt;/h1&gt;
    '';
in
  page // { inherit content; }</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_template_environment"><a class="anchor" href="#_template_environment"></a>7.1.4. Template environment</h4>
<div class="paragraph">
<p>The template environment is the first parameter of the template function.
It is defined when loading the template in <code>default.nix</code>.</p>
</div>
<div class="paragraph">
<p>The default template environment consists in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>conf</code>: the configuration attribute set</p>
</li>
<li>
<p><code>templates</code>: the templates attribute set</p>
</li>
<li>
<p><code>state</code>: the state attribute set, by default it only holds the timestamp of the generation</p>
</li>
<li>
<p><code>lib</code>: the library attribute set, it contains Styx and nixpkgs functions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is possible to extend the template environment at will.</p>
</div>
<div class="paragraph">
<p>There are two ways of writing the <code>environment</code> in the template, as a set or as a deconstructed set.</p>
</div>
<div class="listingblock">
<div class="title">Environment as a variable</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">environment: <i class="conum" data-value="1"></i><b>(1)</b>
page:
''
  ${environment.conf.siteTitle}
''</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>environment</code> is used as a set, and its key can be accessed with <code>.</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Environment as a deconstructed set</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ conf, lib, ... }: <i class="conum" data-value="1"></i><b>(1)</b>
page: <i class="conum" data-value="1"></i><b>(1)</b>
''
  ${conf.siteTitle}
''</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>environment is deconstructed in its keys values. The last <code>&#8230;&#8203;</code> means all others keys and is required if the set contains more keys than the keys deconstructed.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_calling_templates_in_templates"><a class="anchor" href="#_calling_templates_in_templates"></a>7.2. Calling templates in templates</h3>
<div class="paragraph">
<p>It is possible to call templates in a template by accessing to the <code>templates</code> attribute of the template generic environment.</p>
</div>
<div class="listingblock">
<div class="title">Calling a template in a template</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ templates, ... }:
page:
''
  ${templates.foo}
''</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>loadTemplateWithEnv</code> function, or calling the <code>loadTemplate</code> with an environment will partially evaluate the template function. This means that the template function will be become a single argument function (<code>page</code>).
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Trying to call the current template will trigger an infinite loop and make the site generation fail.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_applying_templates_to_multiple_contents"><a class="anchor" href="#_applying_templates_to_multiple_contents"></a>7.3. Applying templates to multiple contents</h3>
<div class="paragraph">
<p>The <code>mapTemplate</code> function can be used to map a template to a list of contents.</p>
</div>
<div class="listingblock">
<div class="title">Applying a template to multiple contents</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">${mapTemplate templates.post.list page.posts}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_library"><a class="anchor" href="#_library"></a>8. Library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The library contains various functions that are used through Styx source.
The functions are grouped in namespaces, but are also all included in the top-level scope to be used in an easy way.</p>
</div>
<div class="sect2">
<h3 id="_generation"><a class="anchor" href="#_generation"></a>8.1. generation</h3>
<div class="paragraph">
<p>This namespace contains functions related to content generation.</p>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>generateSite</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate a site with a list of pages. This is the function returned by <code>default.nix</code>.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>conf</code>: The configuration set.</p>
</li>
<li>
<p><code>pages</code>: A list of pages to generate.</p>
</li>
<li>
<p><code>preGen</code> (optional): A set of commands to execute before generating the site.</p>
</li>
<li>
<p><code>postGen</code> (optional): A set of commands to execute after generating the site.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A static site.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">generateSite { inherit conf; pages = pageList; }</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>pagesToList</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Convert an attribute set of pages to a list of pages. Useful to convert the <code>pages</code> attribute set in <code>default.nix</code> to a page list for <code>generateSite</code>.
Parameter Type: Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>pages</code>: An attributes which every key value is a page attribute set or a list of page attribute sets.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of pages.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages = {
  about = {
    href = "about.html";
    template = templates.about;
  } // (parsePage conf.pagesDir "about.md");
};

pageList = pagesToList pages;</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div id="splitPage" class="dlist">
<dl>
<dt class="hdlist1"><code>splitPage</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Split a page in multiple pages according to parameters. Used for pagination like pages.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>baseHref</code>: The <code>href</code> of the archive pages, the first page <code>href</code> will be <code>baseHref.html</code>, following pages <code>href</code> will be <code>baseHref-i.html</code> where <code>i</code> is the index number of the page.</p>
</li>
<li>
<p><code>items</code>: Items to be split through the pages.</p>
</li>
<li>
<p><code>template</code>: The template used by the split pages.</p>
</li>
<li>
<p><code>itemsPerPage</code>: Maximum number of items displayed on each page.</p>
</li>
<li>
<p>Any extra arguments will be included in the split pages attribute set.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list page attribute sets.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">archives = splitPage {
  baseHref = "archives/posts";
  template = templates.archive;
  items = posts;
  itemsPerPage = conf.postsPerArchivePage;
  title = "Posts";
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_nixpkgs"><a class="anchor" href="#_nixpkgs"></a>8.2. nixpkgs</h3>
<div class="paragraph">
<p>This namespace include the nixpkgs library and <a href="http://nixos.org/nix/manual/#ssec-builtins">builtins</a> functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_content_2"><a class="anchor" href="#_content_2"></a>8.3. content</h3>
<div class="paragraph">
<p>This namespace contains functions to manipulate content, especially posts.</p>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>getPosts</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Fetch all the posts from a <code>postDir</code>.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>postsDir</code>: Path to the folder containing the posts.</p>
</li>
<li>
<p><code>outDir</code>: Part before the name of the post attribute set <code>href</code>. Should not contain leading and trailing <code>/</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of post attribute sets.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">posts = getPosts conf.postsDir "posts";</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The posts attribute sets <code>href</code> depends on the post file name and the <code>outDir</code>.
For a post in a file <code>2016-09-12-welcome-to-styx.md</code> and an <code>outDir</code> set to <code>posts</code>, the generated post <code>href</code> will be <code>posts/2016-09-12-welcome-to-styx.html</code>.
</td>
</tr>
</table>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>getDrafts</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Fetch all the posts from a <code>postDir</code>. This function is similar to <code>getPosts</code>, but add a <code>isDraft = true</code> attribute to every draft attribute set.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>draftsDir</code>: Path to the folder containing the drafts.</p>
</li>
<li>
<p><code>outDir</code>: Part before the name of the draft attribute set <code>href</code>. Should not contain leading and trailing <code>/</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of draft attribute sets.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">posts = getDrafts conf.draftsDir;</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>parsePage</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Parse a markdown file to a partial page attribute set.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>pageDir</code>: Path to the folder containing the page.</p>
</li>
<li>
<p><code>filename</code>: Page file name.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>An attribute set containing <code>content</code> (the page HTML source) and <code>title</code>.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  about = {
    href = "about.html";
    template = templates.about;
    breadcrumbs = [ index ];
  } // (parsePage conf.pagesDir "about.md");</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>parsePost</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Convert a post file into a post attribute set.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>postDir</code>: Path to the folder containing the post.</p>
</li>
<li>
<p><code>filename</code>: Post file name.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A post attribute set.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">myPost = parsePost conf.postsDir "2016-09-12-welcome-to-styx.md";</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>parsePost</code> is also used for drafts as posts and drafts have similar structures.
</td>
</tr>
</table>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>sortPosts</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Sort a list of posts chronologically.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>postList</code>: A list of posts to sort.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The sorted list of posts.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">sortedPosts = sortPosts (getPosts conf.postsDir "posts");</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_template"><a class="anchor" href="#_template"></a>8.4. template</h3>
<div class="paragraph">
<p>This namespace contains functions to manipulate templates.</p>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>htmlAttr</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate an HTML attribute.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>attrName</code>: The attribute name.</p>
</li>
<li>
<p><code>value</code>: The attribute value, can be a list.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>An HTML attribute.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">htmlAttr "class" "foo"
=&gt; class="foo"

htmlAttr "class" [ "foo" "bar" ]
=&gt; class="foo bar"</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>mapTemplate</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Map a template to a list of items.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>template</code>: The template function.</p>
</li>
<li>
<p><code>list</code>: A list of items passed to the template function.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>Resulting HTML.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">mapTemplate templates.post.list page.posts</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>prettyTimestamp</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Convert a timestamp to a prettier format.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>timestamp</code>: A timestamp in the format <code>YYYY-MM-DD</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A timestamp in format <code>DD MMM YYYY</code>.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">prettyTimestamp "2016-09-26"
=&gt; "26 SEP 2016"</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_utils"><a class="anchor" href="#_utils"></a>8.5. utils</h3>
<div class="paragraph">
<p>This namespace contains various utility functions.</p>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>overrideConf</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Extend the configuration attribute set.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>conf</code>: The configuration attribute set.</p>
</li>
<li>
<p><code>override</code>: The override configuration set.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>Overridden configuration.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">conf = overrideConf (import ./conf.nix) args;</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>loadTemplateWithEnv</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Load a template with a template environment.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>env</code>: The template environment set.</p>
</li>
<li>
<p><code>template</code>: The template file to load, relatively to <code>conf.templatesDir</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The template function.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">index = loadTemplateWithEnv { inherit conf state lib templates; } "index.nix";</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>setDefaultLayout</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Set a layout to a page attribute set. Does nothing if the page attribute set has already a layout.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>layout</code>: The layout template.</p>
</li>
<li>
<p><code>page</code>: A page attribute set.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A page attribute set with <code>layout</code> set.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  pageList =
    let list = (pagesToList pages);
    in map (setDefaultLayout templates.layout) list;</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>setTemplate</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Set a template to a page attribute set.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>template</code>: The template function.</p>
</li>
<li>
<p><code>page</code>: A page attribute set.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The template function partially evaluated.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">map (setTemplate templates.post.full) (posts ++ drafts)</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cookbook"><a class="anchor" href="#_cookbook"></a>9. Cookbook</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_navbar"><a class="anchor" href="#_navbar"></a>9.1. NavBar</h3>
<div class="paragraph">
<p>The sample <code>default.nix</code> is setting a NavBar.
Because the NavBar is a site wide feature is should be applied to the layout template (<code>layout.nix</code>).</p>
</div>
<div class="paragraph">
<p>Setting a Navbar consists in two steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Extending the base template environment to include a list of pages that should be in the NavBar.</p>
<div class="paragraph">
<p>Example from <code>default.nix</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  navbar = let <i class="conum" data-value="1"></i><b>(1)</b>
             archive = (head pages.archives) // { title = "Archives"; }; <i class="conum" data-value="2"></i><b>(2)</b>
           in [ archive pages.about ]; <i class="conum" data-value="3"></i><b>(3)</b>

  templates.layout = loadTemplateWithEnv <i class="conum" data-value="4"></i><b>(4)</b>
                     (genericEnv // { inherit navbar; feed = pages.feed; }) <i class="conum" data-value="5"></i><b>(5)</b>
                     "layout.nix"; <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaring a <code>navbar</code> variable.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare an <code>archive</code> variable in the local scope. <code>pages.archives</code> is a list of pages so we extract the first page with <code>head pages.archive</code>, then we extends this page by setting a <code>title</code> using the <code>//</code> operator.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>navbar</code> value is a list containing the first archive page and the about page.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Loading the <code>templates.layout</code> template file.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The first parameter of the <code>loadTemplateWithEnv</code> must be an environment attribute set.
<code>genericEnv</code> is the generic template environment, but as we want to pass the <code>navbar</code> variable to the template, we extends the environment with <code>navbar</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The template file to load.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>{ inherit navbar; }</code> is a shortcut to <code>{ navbar = navbar; }</code>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Using the NavBar template.</p>
<div class="paragraph">
<p>Styx provides a template for generating the Navbar, <code>navbar.main.nix</code>.</p>
</div>
<div class="paragraph">
<p>Example, calling the NavBar template in a template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">${templates.navbar.main navbar} <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>navbar</code> must be a list of pages as showed in the previous section.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The brand part of the NavBar displays <code>conf.siteTitle</code> by default.
To set the NavBar brand to something different than <code>conf.siteTitle</code>, it is recommended to directly edit and change the <code>navbar.brand.nix</code> template.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_pagination"><a class="anchor" href="#_pagination"></a>9.2. Pagination</h3>
<div class="paragraph">
<p>The <code>pagination.nix</code> template provide a generic way to generate a pagination.</p>
</div>
<div class="listingblock">
<div class="title">Using in a page generated by the <code>splitPage</code> function</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">templates.pagination { pages = page.pages; index = page.index; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Styx library provide a <code>splitPage</code> function that can be used to split a page in multiple pages according to a list of items and a number of items to display per page.</p>
</div>
<div class="paragraph">
<p>Its arguments are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>baseHref</code>: <code>href</code> of the archive pages, the first page <code>href</code> will be <code>baseHref.html</code>, following pages <code>href</code> will be <code>baseHref-i.html</code> where <code>i</code> is the index number of the page.</p>
</li>
<li>
<p><code>template</code>: template used by the split pages.</p>
</li>
<li>
<p><code>items</code>: items to be split through the pages.</p>
</li>
<li>
<p><code>itemsPerPage</code>: maximum number of items displayed on each page.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Splitting posts into multiple archive pages</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">archives = splitPage {
  baseHref = "archives/posts";
  template = templates.archive;
  items = posts;
  itemsPerPage = conf.postsPerArchivePage;
  title = "Posts";
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is then possible to use the previous snippet in the used template to add a pagination.</p>
</div>
</div>
<div class="sect2">
<h3 id="_breadcrumbs"><a class="anchor" href="#_breadcrumbs"></a>9.3. Breadcrumbs</h3>
<div class="paragraph">
<p>Breadcrumbs are enbaled by adding a <code>breadcrumbs</code> attribute with the list of pages to include in the breadcrumbs to a page attribute set.
A page attribute set without a breadcrumbs attribute will not display breadcrumbs.</p>
</div>
<div class="listingblock">
<div class="title">Adding breadcrumbs to a page</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">about = {
  href = "about.html";
  template = templates.about;
  title = "About";
  breadcrumbs = [ index ];
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Breadcrumbs are generated with the <code>breadcrumbs.nix</code> template. The default base template include this template.</p>
</div>
<div class="paragraph">
<p>The text of the breadcrumb will be the page <code>title</code>. To set a breadcrumb title that is different of <code>title</code>, it is possible to use the <code>breadcrumbTitle</code> attribute.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment"><a class="anchor" href="#_deployment"></a>10. Deployment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_github_pages"><a class="anchor" href="#_github_pages"></a>10.1. GitHub pages</h3>
<div class="paragraph">
<p>Styx support basic deployment to github pages.</p>
</div>
<div class="paragraph">
<p>This is a two step process, initialization og the <code>gh-pages</code> branch and update of the <code>gh-branch</code> with the built site.</p>
</div>
<div class="listingblock">
<div class="title">Setting a Styx site for GitHub pages</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ styx new mysite &amp;&amp; cd mysite <i class="conum" data-value="1"></i><b>(1)</b>
$ git init &amp;&amp; git add . &amp;&amp; git commit -m "Initializing Styx site" <i class="conum" data-value="2"></i><b>(2)</b>
$ styx deploy --init-gh-pages <i class="conum" data-value="3"></i><b>(3)</b>
$ styx deploy --gh-pages <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creating a new styx site and entering the new site folder.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Initializing a git repository with all the files and commiting.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Creating an empty <code>gh-pages</code> branch.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Building the Styx site and commiting the changes to <code>gh-pages</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then it is just a matter to push the <code>gh-pages</code> branch to your GitHub repository and the site will be published.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<code>styx deploy --init-gh-pages</code> and <code>styx deploy --gh-pages</code> involve git checkouts. Every time git make a checkout, the files timestamp change.
This means that two successive <code>styx deploy --gh-pages</code> will create changes, namely every part of the Styx site that depends on the <code>lastChange</code> argument. (Feed by default)
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_other"><a class="anchor" href="#_other"></a>10.2. Other</h3>
<div class="paragraph">
<p>Styx does not yet provide a universal deployment method.</p>
</div>
<div class="paragraph">
<p>But <code>rsync</code> can be used to deploy a Styx site to a remote server via ssh.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_release_notes"><a class="anchor" href="#_release_notes"></a>11. Release Notes</h2>
<div class="sectionbody">

</div>
</div>
</div>
</body>
</html>